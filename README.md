# MockController

Сервис для централизованного управления конфигурациями заглушек в нагрузочном тестировании.

## Быстрый старт

### Требования
- Java 17+
- PostgreSQL 14+ (или используйте Docker)
- Maven 3.6+

### Установка и настройка

1. **Установите PostgreSQL** (если еще не установлен):
   ```powershell
   .\setup-postgresql.ps1
   ```
   Или следуйте инструкции в [POSTGRESQL_SETUP.md](POSTGRESQL_SETUP.md)

2. **Настройте подключение к БД** в `src/main/resources/application.yml`:
   ```yaml
   spring:
     datasource:
       url: jdbc:postgresql://localhost:5432/mockcontroller
       username: postgres
       password: ваш_пароль
   ```

3. **Запустите приложение**:
   ```bash
   .\restart.bat
   # или
   mvn spring-boot:run
   ```

4. **Откройте веб-интерфейс**:
   ```
   http://localhost:8080
   ```

## Основные возможности

### Управление конфигурациями заглушек
- Просмотр и редактирование конфигураций через веб-интерфейс
- Применение шаблонов к конфигурациям (предпросмотр изменений без автоматического сохранения)
- Отложенное применение изменений с указанием времени и комментария
- Возврат к стартовой конфигурации

### Шаблоны конфигураций
- Создание шаблонов из текущей конфигурации
- Применение шаблонов к заглушкам той же системы
- Редактирование и удаление шаблонов
- Группировка шаблонов по системам и заглушкам

### Сценарии выполнения
- Создание сценариев с несколькими временными точками
- Применение шаблонов в определенное время
- Планирование выполнения сценариев
- Группировка сценариев по группам систем

### Группы систем
- Создание групп систем для организации сценариев
- Управление группами через веб-интерфейс

### Темная тема
- Переключение между светлой и темной темой
- Сохранение выбранной темы в браузере
- Автоматическое применение темы на всех страницах

- ✅ Прием конфигов от заглушек через REST API
- ✅ Автоматическое управление версиями (v1, v2, ...)
- ✅ Веб-интерфейс для редактирования параметров
- ✅ Отображение стартовых значений с возможностью подстановки
- ✅ Откат конфига к стартовому состоянию
- ✅ Отложенное сохранение конфигураций с комментариями
- ✅ Удаление конфигураций через веб-интерфейс
- ✅ Группировка заглушек по системам на главной странице
- ✅ Хранение данных в PostgreSQL

## Технологии

- **Backend**: Java 17, Spring Boot 3.3.1, Spring Data JPA
- **Database**: PostgreSQL
- **Frontend**: Thymeleaf, HTML/CSS/JavaScript
- **Build**: Maven

## Структура проекта

- `src/main/java` - Java код (Spring Boot)
- `src/main/resources/templates` - HTML шаблоны
- `src/main/resources/application.yml` - конфигурация приложения
- `docs/` - документация

## База данных

Приложение использует PostgreSQL для хранения данных. Таблицы создаются автоматически при первом запуске.

**Таблицы:**
- `stored_configs` - конфигурации заглушек
- `scheduled_config_updates` - запланированные обновления

Подробнее: [POSTGRESQL_SETUP.md](POSTGRESQL_SETUP.md)

## Документация

- [API Документация](docs/API_DOCUMENTATION.md) - полное описание REST API и веб-интерфейса с примерами
- [API Быстрая справка](docs/API_QUICK_REFERENCE.md) - краткая шпаргалка по эндпоинтам
- [Проект](PROJECT_SUMMARY.md) - общее описание проекта
- [Установка PostgreSQL](POSTGRESQL_SETUP.md) - инструкция по установке и настройке БД

## Интеграция

Пример реализации заглушки с интеграцией к MockController:
- [MocConnectToMockController](https://github.com/Diavolos88/MocConnectToMockController) - библиотека для подключения Spring Boot заглушек к MockController
