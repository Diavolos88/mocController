# Краткий туториал по использованию MockController

## Навигация

В верхней части страницы доступны следующие вкладки:
- **Заглушки** - управление конфигурациями заглушек
- **Статусы** - мониторинг состояния заглушек
- **Сценарии** - создание и выполнение сценариев изменения конфигов
- **Шаблоны** - управление шаблонами конфигураций
- **Группы** - группировка заглушек для удобного управления

---

## 1. Заглушки (`/`)

### Назначение
Просмотр и управление всеми зарегистрированными заглушками и их конфигурациями.

### Основные функции:

#### Просмотр списка заглушек
- На главной странице отображаются все заглушки, сгруппированные по системам
- Для заглушек с шаблоном `system-integration-mock` автоматически создаются группы
- Заглушки без группы отображаются отдельно

#### Редактирование конфигурации
1. Выберите заглушку из списка
2. Нажмите на название заглушки или кнопку "Редактировать"
3. На странице редактирования доступны:
   - **Текущие значения** - активные параметры заглушки
   - **Стартовые значения** - исходные значения (можно кликнуть для подстановки)
   - **Запланированные обновления** - список будущих изменений

#### Изменение параметров
- **delays** - задержки ответа (в миллисекундах)
- **stringParams** - строковые параметры
- **intParams** - целочисленные параметры
- **booleanVariables** - булевы переменные
- **loggingLv** - уровень логирования (ERROR, WARN, INFO, DEBUG)

#### Действия:
- **Сохранить** - применить изменения немедленно
- **Вернуть к стартовому** - откатить все изменения к исходным значениям
- **Удалить** - удалить конфигурацию заглушки

---

## 2. Статусы (`/status`)

### Назначение
Мониторинг состояния заглушек в реальном времени.

### Основные функции:

#### Просмотр статусов
- **Группированные системы** - заглушки, объединенные в группы
- **Без группы** - заглушки, не входящие ни в одну группу

#### Информация о статусе:
- **Онлайн/Офлайн** - количество активных и неактивных подов
- **Всего подов** - общее количество инстансов
- **Последний healthcheck** - время последней проверки здоровья

#### Фильтрация:
- Выберите группу из вкладок для просмотра статусов только этой группы
- Вкладка "Без группы" показывает незагруппированные заглушки

#### Действия:
- **Удалить из статусов** - удалить заглушку из мониторинга (конфиг остается)
- Клик по названию системы - просмотр детальной информации

---

## 3. Сценарии (`/scenarios`)

### Назначение
Создание и выполнение сценариев последовательного изменения конфигураций заглушек.

### Основные функции:

#### Создание сценария
1. Нажмите "Создать сценарий"
2. Заполните:
   - **Название** - имя сценария
   - **Описание** - описание назначения сценария
   - **Шаги** - последовательность изменений:
     - Выберите шаблон конфигурации
     - Укажите время выполнения (формат: HH:mm:ss, например 00:01:00)
     - Добавьте комментарий (опционально)
     - Укажите задержку (опционально, если не указано время)

#### Выполнение сценария
- **Применить сейчас** - запуск сценария немедленно (время шагов отсчитывается от текущего момента)
- **Применить с задержкой** - запуск сценария в указанное время (время шагов отсчитывается от времени запуска)

#### Управление сценариями:
- **Редактировать** - изменить параметры сценария
- **Удалить** - удалить сценарий
- **Просмотр** - детальная информация о сценарии

---

## 4. Шаблоны (`/templates`)

### Назначение
Создание и управление шаблонами конфигураций для использования в сценариях.

### Основные функции:

#### Создание шаблона
1. Нажмите "Создать шаблон"
2. Заполните:
   - **Название** - имя шаблона
   - **Система** - название системы заглушки
   - **Конфигурация** - JSON конфигурация (delays, stringParams, intParams, booleanVariables, loggingLv)

#### Использование шаблонов
- Шаблоны используются при создании шагов в сценариях
- Можно создавать несколько шаблонов для одной системы с разными параметрами

#### Управление:
- **Редактировать** - изменить шаблон
- **Удалить** - удалить шаблон
- **Просмотр** - детальная информация о шаблоне

---

## 5. Группы (`/groups`)

### Назначение
Группировка заглушек для удобного управления и мониторинга.

### Основные функции:

#### Создание группы
1. Нажмите "Создать группу"
2. Заполните:
   - **Название** - имя группы
   - **Описание** - описание назначения группы
   - **Системы** - список заглушек, входящих в группу

#### Автоматическое создание групп
- Группы автоматически создаются для заглушек с шаблоном `system-integration-mock`
- Название группы = название системы (часть до первого тире)
- Пример: `test-t2-mock` → группа `test`

#### Управление:
- **Редактировать** - изменить состав группы
- **Удалить** - удалить группу
- **Healthcheck группы** - проверка состояния всех заглушек в группе

---

## Полезные советы

### Работа с временем в сценариях
- Время шага указывается в формате `HH:mm:ss` (например, `00:01:00` = 1 минута)
- При "Применить сейчас" время отсчитывается от текущего момента
- При "Применить с задержкой" время отсчитывается от времени запуска сценария

### Группировка заглушек
- Используйте шаблон `system-integration-mock` для автоматической группировки
- Примеры: `auth-mock`, `payment-t1-mock`, `user-t2-mock`
- Группы упрощают мониторинг и управление множеством заглушек

### Мониторинг
- Регулярно проверяйте вкладку "Статусы" для контроля состояния заглушек
- Заглушки считаются офлайн, если последний healthcheck был более 5 минут назад (настраивается)

### Откат изменений
- Используйте "Вернуть к стартовому" для быстрого отката всех изменений
- Стартовые значения сохраняются при первой регистрации заглушки

---

## Быстрые действия

| Действие | Путь |
|----------|------|
| Просмотр всех заглушек | `/` |
| Редактирование конфига | `/configs/{systemName}` |
| Мониторинг статусов | `/status` |
| Создание сценария | `/scenarios/new` |
| Создание шаблона | `/templates/new` |
| Управление группами | `/groups` |

